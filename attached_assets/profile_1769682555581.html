<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Профиль — FTC Spectrum</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="styleminecraftmodcreate.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet"/>
</head>
<body>
  <header class="main-header">
    <span class="logo" onclick="location.href='index.html'" style="cursor:pointer">FTC Spectrum</span>
    <button class="burger" id="burgerBtn"><span></span><span></span><span></span></button>
    <nav id="mainNav" class="nav">
      <button class="nav-btn" id="langBtn">Рус</button>
      <button class="nav-btn" id="msgBtn">Чат</button>
      <button class="nav-btn" id="profileBtn">Профиль</button>
      <button class="post-ad" id="adBtn">Подать объявление</button>
    </nav>
  </header>

  <main>
    <div class="profile-wrapper">
      <h1 class="profile-title">Профиль</h1>
      <div class="profile-card">
        <div class="profile-avatar">
          <img src="https://ui-avatars.com/api/?name=User&background=32B6FF&color=fff" id="avatarImg">
        </div>
        <div class="profile-info">
          <div class="profile-field"><span class="profile-label">Имя:</span><span class="profile-value" id="dName">...</span></div>
          <div class="profile-field"><span class="profile-label">Город:</span><span class="profile-value" id="dLoc">...</span></div>
          <div class="profile-field"><span class="profile-label">Контакт:</span><span class="profile-value" id="dCont">...</span></div>
          <div class="profile-field"><span class="profile-label">Команда:</span><span class="profile-value" id="dTeam">...</span></div>
        </div>
        <div class="profile-actions">
          <button class="post-ad" id="editProfileBtn">Редактировать</button>
        </div>
      </div>
    </div>

    <div class="modal-bg" id="modalBg" style="display:none;">
      <div class="modal-window" id="modalWin">
        <form id="editForm">
          <h2 style="text-align:center">Редактирование</h2>
          <div style="display:flex; flex-direction:column; gap:15px;">
             <label>Имя <input type="text" name="name" id="iName" class="filter-input"></label>
             <label>Город <input type="text" name="location" id="iLoc" class="filter-input"></label>
             <label>Контакт <input type="text" name="contact" id="iCont" class="filter-input"></label>
             <label>Команда <input type="text" name="team" id="iTeam" class="filter-input"></label>
          </div>
          <div style="margin-top:20px; text-align:center; display:flex; gap:10px; justify-content:center;">
             <button type="submit" class="post-ad">Сохранить</button>
             <button type="button" class="search-btn" onclick="closeModal()">Отмена</button>
          </div>
        </form>
      </div>
    </div>
  </main>

  <script src="main.js"></script>
  <script>
    const user = getUser();
    const els = { n: document.getElementById('dName'), l: document.getElementById('dLoc'), c: document.getElementById('dCont'), t: document.getElementById('dTeam') };
    
    function renderProfile() {
      els.n.textContent = user.name;
      els.l.textContent = user.location;
      els.c.textContent = user.contact;
      els.t.textContent = user.team;
      document.getElementById('avatarImg').src = `https://ui-avatars.com/api/?name=${user.name}&background=32B6FF&color=fff&size=140`;
    }
    renderProfile();

    const modal = document.getElementById('modalBg');
    document.getElementById('editProfileBtn').onclick = () => {
      document.getElementById('iName').value = user.name;
      document.getElementById('iLoc').value = user.location;
      document.getElementById('iCont').value = user.contact;
      document.getElementById('iTeam').value = user.team;
      modal.style.display = 'flex';
    };

    window.closeModal = () => modal.style.display = 'none';

    document.getElementById('editForm').onsubmit = (e) => {
      e.preventDefault();
      user.name = document.getElementById('iName').value;
      user.location = document.getElementById('iLoc').value;
      user.contact = document.getElementById('iCont').value;
      user.team = document.getElementById('iTeam').value;
      
      localStorage.setItem('ftc_user', JSON.stringify(user));
      renderProfile();
      closeModal();
    };
  </script>
</body>
</html>